<table>
       <tbody>
            <volist name="goodsList" id="list">
              <tr data-id="{$list[goods_id]}">
                <td class="sign" axis="col6">
                  <div style="width: 24px;"><i class="ico-check"></i></div>
                </td>
			          <td class="handle" >
                <div style="text-align:left;   min-width:50px !important; max-width:inherit !important;">
                  <span class="btn"><em><i class="fa fa-cog"></i>设置<i class="arrow"></i></em>
                  <ul>
                    <li><a target="_blank" href="{:U('MobileYxyp/Goods/goodsInfo',array('id'=>$list['goods_id']))}">预览商品</a></li>
                    <li><a href="{:U('Admin/GoodsYxyp/addEditGoods',array('id'=>$list['goods_id'],'is_red'=>$is_red))}">编辑商品</a></li>
                    <li><a href="javascript:void(0);" onclick="publicHandle('{$list[goods_id]}','del')">删除商品</a></li>
                    <!-- <li><a href="javascript:void(0);" onclick="ClearGoodsHtml('{$list[goods_id]}')">清除静态缓存</a></li> -->
                    <li><a href="javascript:void(0);" onclick="ClearGoodsThumb('{$list[goods_id]}')">清除缩略图缓存</a></li>                    
                  </ul>
                  </span>
                </div>
                </td>                
                <td align="center" axis="col0">
                  <div style="width: 50px;">{$list.goods_id}</div>
                </td>                
                <td align="center" axis="col0">
                  <div style="text-align: left; width: 300px;" id="title_{$list.goods_id}" onclick="tipShow('title_{$list.goods_id}',this);" title="{$list.goods_name}"><if condition="$list[is_virtual] eq 1"><span class="type-virtual" title="虚拟兑换商品">虚拟</span></if>{$list.goods_name|getSubstr=0,33}</div>
                </td>
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 150px;">{$list.suppliers_id|get_suppliers_name}</div>
                </td>
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 100px;">{$list.goods_sn}</div>
                </td>
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 100px;">{$catList[$list[cat_id]][name]}</div>
                </td>
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 50px;">{$list.sales_sum}</div>
                </td>
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 50px;">{$list.shop_price}</div>
                </td> 
				        <!-- <td align="center" axis="col0">
                <div style="text-align: center; width: 200px;">
                    {$list.midou}
                    +
                    ￥{$list.midou_money}
                </div>
                </td> -->            
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 30px;">
                    <if condition='$list[is_recommend] eq 1'>
                      <span class="yes" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_recommend',this)" ><i class="fa fa-check-circle"></i>是</span>
                      <else />
                      <span class="no" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_recommend',this)" ><i class="fa fa-ban"></i>否</span>
                    </if>
                  </div>
                </td>                
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 30px;">
                    <if condition='$list[is_new] eq 1'>
                      <span class="yes" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_new',this)" ><i class="fa fa-check-circle"></i>是</span>
                      <else />
                      <span class="no" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_new',this)" ><i class="fa fa-ban"></i>否</span>
                    </if>
                  </div>
                </td>       
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 30px;">
                    <if condition='$list[is_hot] eq 1'>
                      <span class="yes" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_hot',this)" ><i class="fa fa-check-circle"></i>是</span>
                      <else />
                      <span class="no" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_hot',this)" ><i class="fa fa-ban"></i>否</span>
                    </if>
                  </div>
                </td>       
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 50px;">
                    <if condition='$list[is_on_sale] eq 1'>
                      <span class="yes" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_on_sale',this)" ><i class="fa fa-check-circle"></i>是</span>
                    <else />
                      <if condition='$list[store_count] elt 0'>
                          <span class="no" onClick="alert('库存为0不可上架')" ><i class="fa fa-ban"></i>否</span>
                      <else />
                          <span class="no" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_on_sale',this)" ><i class="fa fa-ban"></i>否</span>
                      </if>
                    </if>
                  </div>
                </td>
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 50px;">
                    <if condition='$list[is_tgy_good] eq 1'>
                      <span class="yes" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_tgy_good',this)" ><i class="fa fa-check-circle"></i>是</span>
                      <else />
                      <span class="no" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_tgy_good',this)" ><i class="fa fa-ban"></i>否</span>
                    </if>
                  </div>
                </td>
                <td align="center" axis="col0">                  
                  <div style="text-align: center; width: 50px; <if condition="$list.store_count elt tpCache('basic.warning_storage')">color:#D91222;</if> ">
                    {$list.store_count}
                  </div>
                </td>           
                <td align="center" axis="col0">                  
                  <div style="text-align: center; width: 50px;">
                    <input type="text" onKeyUp="this.value=this.value.replace(/[^\d]/g,'')" onpaste="this.value=this.value.replace(/[^\d]/g,'')" onblur="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','sort',this)" size="4" value="{$list.sort}" />
                  </div>                  
                </td>
                <td align="center" axis="col0">
                  <div style="text-align: center; width: 120px;">
                    <if condition='$list[is_check] eq 1'>
                      <span class="yes" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_check',this,'通过','未通过')" ><i class="fa fa-check-circle"></i>通过</span>
                    <else />
                      <if condition='$list[store_count] elt 0'>
                          <span class="no" onClick="alert('库存为0不可审核')" ><i class="fa fa-ban"></i>未通过</span>
                      <else />
                          <span class="no" onClick="changeTableVal('goods_yxyp','goods_id','{$list.goods_id}','is_check',this,'通过','未通过')" ><i class="fa fa-ban"></i>未通过</span>
                      </if>
                    </if>
                    |
                    <a href="javascript:;" onclick="is_check({$list.goods_id});" class="btn blue"><i class="fa fa-search"></i>审核</a>
                  </div>
                </td>                     
                <td align="" class="" style="width: 100%;">
                  <div>&nbsp;</div>
                </td>
              </tr>
            </volist>             
          </tbody>
        </table>
        <!--分页位置--> {$page}
    		<script>
          // 点击分页触发的事件
          $(".pagination  a").click(function(){
              cur_page = $(this).data('p');
              ajax_get_table('search-form2',cur_page);
          });
    			
    			/*
    			 * 清除静态页面缓存
    			 */
    			function ClearGoodsHtml(goods_id)
    			{
    				$.ajax({
    						type:'GET',
    						url:"{:U('Admin/System/ClearGoodsRedHtml')}",
    						data:{goods_id:goods_id},
    						dataType:'json',
    						success:function(data){
    							layer.alert(data.msg, {icon: 2});								 
    						}
    				});
    			}
    			/*
    			 * 清除商品缩列图缓存
    			 */
    			function ClearGoodsThumb(goods_id)
    			{
    				$.ajax({
    						type:'GET',
    						url:"{:U('Admin/System/ClearGoodsRedThumb')}",
    						data:{goods_id:goods_id},
    						dataType:'json',
    						success:function(data){
    							layer.alert(data.msg, {icon: 2});								 
    						}
    				});
    			}



          //审核商品
          function is_check(id)
          {
              var url = "{:U('Admin/GoodsYxyp/is_check')}";
              if(id){
                  url += "?t=1&goods_id="+id;
                  layer.open({
                      type: 2,
                      title: '商品审核',
                      shadeClose: true,
                      shade: 0.8,
                      area: ['580px', '480px'],
                      content: url
                  });
              }else{
                  layer.msg('请选择商品',{icon:2});
              }
          }

          function tipShow(id,obj){
              var g_title = $(obj).attr('title');
              layer.tips(g_title, '#'+id, {
                tips: [1, '#0FA6D8'] //还可配置颜色
              });
          }
    
		
        </script>

